/*
	general map generation class
	18.9.2013 | m@mhm.li
	
	This code is provided as-is under the GPL GNU General Public Licence v3
	and may be freely used, adapted and built upon. No guarantee is provided or implied. Test your code!
	http://www.gnu.org/licenses/gpl.html

	Simplify generation of Google Maps on a web page

	The existing default usage via Google's own implementation is great, but this version adds an improved
	overlay function, the option to add MarkerLabel functionality by setting an option to true, and much
	easier addition of custom map styles.
	
	• Labels are displayed with the markers. Label content is displayed directly in the map.
	• Markercontent is displayed in the overlay when a marker is clicked.
	
	This file is quite heavy and heavily commented. Use class.googlemaps.min.js instead.

	See class.googlemaps.html for a demo of how to use this script with a couple of simple options.
	
	Also see http://google-maps-utility-library-v3.googlecode.com/svn/tags/markerwithlabel/1.1.9/src/markerwithlabel_packed.js

*/var frp_googlemaps_rootclass,MarkerWithLabel,marker,bounds,frp_googlemaps;eval(function(e,t,n,r,i,s){i=function(e){return(e<t?"":i(parseInt(e/t)))+((e%=t)>35?String.fromCharCode(e+29):e.toString(36))};if(!"".replace(/^/,String)){while(n--)s[i(n)]=r[n]||i(n);r=[function(e){return s[e]}];i=function(){return"\\w+"};n=1}while(n--)r[n]&&(e=e.replace(new RegExp("\\b"+i(n)+"\\b","g"),r[n]));return e}('7 1G(b,a){7 1u(){};1u.v=a.v;b.2B=a.v;b.v=1b 1u();b.v.3h=b}7 u(c,b,a){2.3=c;2.1L=c.2y;2.6=K.1A("2k");2.6.4.S="Z: 1p; 15: 1P;";2.q=K.1A("2k");2.q.4.S=2.6.4.S;2.q.1M("2A","1d A;");2.q.1M("2w","1d A;");2.U=u.P(b)}1G(u,8.5.3g);u.P=7(b){t a;9(C u.P.1j==="B"){a=K.1A("30");a.4.S="Z: 1p; z-2Y: 2W; M: 13;";a.4.1l="-2P";a.4.1x="-2M";a.2I=b;u.P.1j=a}1d u.P.1j};u.v.2D=7(){t g=2;t m=A;t c=A;t f;t j,1e;t p;t d;t h;t o;t n=20;t i="3p("+2.1L+")";t k=7(e){9(e.2q){e.2q()}e.3l=G;9(e.2n){e.2n()}};t l=7(){g.3.2m(3c)};2.1E().1J.X(2.6);2.1E().36.X(2.q);9(C u.P.2e==="B"){2.1E().1J.X(2.U);u.P.2e=G}2.1t=[8.5.r.O(2.q,"2c",7(e){9(g.3.R()||g.3.W()){2.4.19="25";8.5.r.D(g.3,"2c",e)}}),8.5.r.O(2.q,"21",7(e){9((g.3.R()||g.3.W())&&!c){2.4.19=g.3.2V();8.5.r.D(g.3,"21",e)}}),8.5.r.O(2.q,"1X",7(e){c=A;9(g.3.R()){m=G;2.4.19=i}9(g.3.R()||g.3.W()){8.5.r.D(g.3,"1X",e);k(e)}}),8.5.r.O(K,"1s",7(a){t b;9(m){m=A;g.q.4.19="25";8.5.r.D(g.3,"1s",a)}9(c){9(d){b=g.Y().1v(g.3.Q());b.y+=n;g.3.J(g.Y().1S(b));2O{g.3.2m(8.5.2N.2L);2J(l,2H)}2E(e){}}g.U.4.M="13";g.3.11(f);p=G;c=A;a.L=g.3.Q();8.5.r.D(g.3,"1N",a)}}),8.5.r.w(g.3.1g(),"2C",7(a){t b;9(m){9(c){a.L=1b 8.5.2z(a.L.1f()-j,a.L.1i()-1e);b=g.Y().1v(a.L);9(d){g.U.4.14=b.x+"H";g.U.4.T=b.y+"H";g.U.4.M="";b.y-=n}g.3.J(g.Y().1S(b));9(d){g.q.4.T=(b.y+n)+"H"}8.5.r.D(g.3,"1K",a)}V{j=a.L.1f()-g.3.Q().1f();1e=a.L.1i()-g.3.Q().1i();f=g.3.1c();h=g.3.Q();o=g.3.1g().2x();d=g.3.F("16");c=G;g.3.11(1I);a.L=g.3.Q();8.5.r.D(g.3,"1H",a)}}}),8.5.r.O(K,"2v",7(e){9(c){9(e.3r===27){d=A;g.3.J(h);g.3.1g().3q(o);8.5.r.D(K,"1s",e)}}}),8.5.r.O(2.q,"2u",7(e){9(g.3.R()||g.3.W()){9(p){p=A}V{8.5.r.D(g.3,"2u",e);k(e)}}}),8.5.r.O(2.q,"2s",7(e){9(g.3.R()||g.3.W()){8.5.r.D(g.3,"2s",e);k(e)}}),8.5.r.w(2.3,"1H",7(a){9(!c){d=2.F("16")}}),8.5.r.w(2.3,"1K",7(a){9(!c){9(d){g.J(n);g.6.4.N=1I+(2.F("17")?-1:+1)}}}),8.5.r.w(2.3,"1N",7(a){9(!c){9(d){g.J(0)}}}),8.5.r.w(2.3,"3o",7(){g.J()}),8.5.r.w(2.3,"3n",7(){g.11()}),8.5.r.w(2.3,"3m",7(){g.18()}),8.5.r.w(2.3,"3j",7(){g.18()}),8.5.r.w(2.3,"3i",7(){g.1C()}),8.5.r.w(2.3,"3f",7(){g.1y()}),8.5.r.w(2.3,"3e",7(){g.1z()}),8.5.r.w(2.3,"3d",7(){g.1a()}),8.5.r.w(2.3,"3b",7(){g.1a()})]};u.v.3a=7(){t i;2.6.2j.2i(2.6);2.q.2j.2i(2.q);2h(i=0;i<2.1t.39;i++){8.5.r.38(2.1t[i])}};u.v.37=7(){2.1y();2.1C();2.1a()};u.v.1y=7(){t a=2.3.F("1w");9(C a.35==="B"){2.6.12=a;2.q.12=2.6.12}V{2.6.12="";2.6.X(a);a=a.34(G);2.q.X(a)}};u.v.1C=7(){2.q.33=2.3.32()||""};u.v.1a=7(){t i,E;2.6.1r=2.3.F("1q");2.q.1r=2.6.1r;2.6.4.S="";2.q.4.S="";E=2.3.F("E");2h(i 31 E){9(E.2Z(i)){2.6.4[i]=E[i];2.q.4[i]=E[i]}}2.2b()};u.v.2b=7(){2.6.4.Z="1p";2.6.4.15="1P";9(C 2.6.4.I!=="B"&&2.6.4.I!==""){2.6.4.2a="\\"29:28.26.2f(I="+(2.6.4.I*24)+")\\"";2.6.4.23="22(I="+(2.6.4.I*24)+")"}2.q.4.Z=2.6.4.Z;2.q.4.15=2.6.4.15;2.q.4.I=0.2X;2.q.4.2a="\\"29:28.26.2f(I=1)\\"";2.q.4.23="22(I=1)";2.1z();2.J();2.18()};u.v.1z=7(){t a=2.3.F("1o");2.6.4.1l=-a.x+"H";2.6.4.1x=-a.y+"H";2.q.4.1l=-a.x+"H";2.q.4.1x=-a.y+"H"};u.v.J=7(a){t b=2.Y().1v(2.3.Q());9(C a==="B"){a=0}2.6.4.14=1Z.1Y(b.x)+"H";2.6.4.T=1Z.1Y(b.y-a)+"H";2.q.4.14=2.6.4.14;2.q.4.T=2.6.4.T;2.11()};u.v.11=7(){t a=(2.3.F("17")?-1:+1);9(C 2.3.1c()==="B"){2.6.4.N=2U(2.6.4.T,10)+a;2.q.4.N=2.6.4.N}V{2.6.4.N=2.3.1c()+a;2.q.4.N=2.6.4.N}};u.v.18=7(){9(2.3.F("1n")){2.6.4.M=2.3.2T()?"2S":"13"}V{2.6.4.M="13"}2.q.4.M=2.6.4.M};7 1m(a){a=a||{};a.1w=a.1w||"";a.1o=a.1o||1b 8.5.2R(0,0);a.1q=a.1q||"2Q";a.E=a.E||{};a.17=a.17||A;9(C a.1n==="B"){a.1n=G}9(C a.16==="B"){a.16=G}9(C a.2d==="B"){a.2d=G}9(C a.1W==="B"){a.1W=A}9(C a.1B==="B"){a.1B=A}a.1k=a.1k||"1V"+(K.1U.1T==="2g:"?"s":"")+"://5.1R.1Q/2t/2l/2o/2K.3k";a.1F=a.1F||"1V"+(K.1U.1T==="2g:"?"s":"")+"://5.1R.1Q/2t/2l/2o/2G.2F";a.1B=A;2.2p=1b u(2,a.1k,a.1F);8.5.1D.1O(2,2r)}1G(1m,8.5.1D);1m.v.1h=7(a){8.5.1D.v.1h.1O(2,2r);2.2p.1h(a)};',62,214,"||this|marker_|style|maps|labelDiv_|function|google|if|||||||||||||||||eventDiv_|event||var|MarkerLabel_|prototype|addListener||||false|undefined|typeof|trigger|labelStyle|get|true|px|opacity|setPosition|document|latLng|display|zIndex|addDomListener|getSharedCross|getPosition|getDraggable|cssText|top|crossDiv_|else|getClickable|appendChild|getProjection|position||setZIndex|innerHTML|none|left|overflow|raiseOnDrag|labelInBackground|setVisible|cursor|setStyles|new|getZIndex|return|cLngOffset|lat|getMap|setMap|lng|crossDiv|crossImage|marginLeft|MarkerWithLabel|labelVisible|labelAnchor|absolute|labelClass|className|mouseup|listeners_|tempCtor|fromLatLngToDivPixel|labelContent|marginTop|setContent|setAnchor|createElement|optimized|setTitle|Marker|getPanes|handCursor|inherits|dragstart|1000000|overlayImage|drag|handCursorURL_|setAttribute|dragend|apply|hidden|com|gstatic|fromDivPixelToLatLng|protocol|location|http|draggable|mousedown|round|Math||mouseout|alpha|filter|100|pointer|Microsoft||DXImageTransform|progid|MsFilter|setMandatoryStyles|mouseover|clickable|processed|Alpha|https|for|removeChild|parentNode|div|en_us|setAnimation|stopPropagation|mapfiles|label|preventDefault|arguments|dblclick|intl|click|keydown|ondragstart|getCenter|handCursorURL|LatLng|onselectstart|superClass_|mousemove|onAdd|catch|cur|closedhand_8_8|1406|src|setTimeout|drag_cross_67_16|BOUNCE|9px|Animation|try|8px|markerLabels|Point|block|getVisible|parseInt|getCursor|1000002|01|index|hasOwnProperty|img|in|getTitle|title|cloneNode|nodeType|overlayMouseTarget|draw|removeListener|length|onRemove|labelstyle_changed|null|labelclass_changed|labelanchor_changed|labelcontent_changed|OverlayView|constructor|title_changed|labelvisible_changed|png|cancelBubble|visible_changed|zindex_changed|position_changed|url|setCenter|keyCode".split("|"),0,{}));frp_googlemaps={map:null,infowindow:null,infowindowContent:null,locations:[],pins:[],text:{reset:"Reset",close:"Close"},asset_path:"",pin_default:function(){return null},useStyledMarkers:!1,options:{mapTypeID:null,lat_default:46.817918,lon_default:8.227386,zoomlevel_default:7,zoomlevel_near:10,focus_centre:!0,showLabels:!1,fitToBounds:!1,hasInfoWindow:!0,focus_zoom:!0,icon_offset:[0,0],icon_size:[16,16]},controls:{resetbutton:!0,visualRefresh:!0,disableDefaultUI:!1,panControl:!1,mapTypeControl:!1,scaleControl:!0,streetViewControl:!1,overviewMapControl:!1,zoomControl:!0,zoomControlOptions:{style:null,position:null}},setMapStyle:function(e){if(e&&e!==null){var t=new google.maps.StyledMapType(e,{name:"customStyle"});this.map.mapTypes.set("customStyle",t);this.map.setMapTypeId("customStyle")}},Marker:function(e){e.baseClass.options.showLabels?marker=new MarkerWithLabel({position:e.position,zIndex:e.zIndex,map:e.map,icon:e.icon,labelContent:e.labelContent,markerContent:e.markerContent,labelAnchor:new google.maps.Point(12,8),title:e.title,locationID:e.locationID}):marker=new google.maps.Marker({position:e.position,zIndex:e.zIndex,map:e.map,icon:e.icon,labelContent:e.labelContent,markerContent:e.markerContent,title:e.title,locationID:e.locationID});marker.baseClass=e.baseClass;return marker},makeMap:function(e,t){this.controls.visualRefresh&&(google.maps.visualRefresh=!0);this.map=new google.maps.Map(document.getElementById(e),{zoom:this.options.zoomlevel_default,center:this.centrePoint(),mapTypeId:this.options.mapTypeID?this.options.mapTypeID:google.maps.MapTypeId.HYBRID,panControl:this.controls.panControl,mapTypeControl:this.controls.mapTypeControl,scaleControl:this.controls.scaleControl,streetViewControl:this.controls.streetViewControl,overviewMapControl:this.controls.overviewMapControl,zoomControl:this.controls.zoomControl,zoomControlOptions:this.controls.zoomControlOptions});this.setMapStyle(t);this.options.fitToBounds&&(bounds=new google.maps.LatLngBounds);var n,r,i=this;for(r in this.locations)if(this.locations.hasOwnProperty(r)){var s=this.locations[r].rankedPosition;n=new this.Marker({map:this.map,position:new google.maps.LatLng(this.locations[r].longitude,this.locations[r].latitude),title:this.locations[r].title,labelContent:this.locations[r].labelContent,markerContent:this.locations[r].markerContent,rankedPosition:s+"",zIndex:1e4-r,locationID:this.locations[r].locationID,baseClass:this});if(this.locations[r]&&this.locations[r].icon){var o=this.locations[r].offset?this.locations[r].offset:this.options.icon_offset,u=this.locations[r].icon_size?this.locations[r].icon_size:this.options.icon_size;n.setIcon({url:this.locations[r].icon,anchor:new google.maps.Point(o[0],o[1]),size:new google.maps.Size(u[0],u[1])})}if(this.options.fitToBounds){bounds.extend(n.position);this.map.fitBounds(bounds)}google.maps.event.addListener(n,"click",function(e){i.markerClickHandler(e,this,i)})}this.addResetButton();this.monitorEscapeButton()},centrePoint:function(){return new google.maps.LatLng(this.options.lat_default,this.options.lon_default)},resetMap:function(){this.hideOverlay();this.map.setZoom(this.options.zoomlevel_default);this.map.setCenter(this.centrePoint())},markerClickHandler:function(e,t,n){n.options.focus_centre&&n.map.panTo(t.getPosition());if(n.options.focus_zoom){console.log("zoomy");n.map.setZoom(n.options.zoomlevel_near)}n.options.hasInfoWindow&&n.showOverlay(n.map,t)},showOverlay:function(e,t){if(!this.infowindow){this.infowindow=$('<div class="overlay window"><div class="wrapper"><div class="inner"><a class="close button" href="#">'+this.text.close+'</a><div class="content"></div></div></div></div>');this.infowindowContent=this.infowindow.find("div.content");var n=this;this.infowindow.find("a.close").click(function(e){e.preventDefault();n.hideOverlay()});$(this.map.b).append(this.infowindow)}this.fillOverlay(t.markerContent);this.infowindow.show()},fillOverlay:function(e){this.infowindowContent&&this.infowindowContent.html(e)},hideOverlay:function(){if(this.infowindow){this.infowindowContent.empty();this.infowindow.hide()}},addResetButton:function(){if(this.controls.resetbutton){this.resetButton=$('<button class="reset">'+this.text.reset+"</button>");baseClass=this;this.resetButton.click(function(e){baseClass.resetMap()});$(this.map.b).append(this.resetButton)}},monitorEscapeButton:function(){frp_googlemaps_rootclass=this;$(document).keydown(function(e){e.keyCode===27&&frp_googlemaps_rootclass.hideOverlay&&frp_googlemaps_rootclass.hideOverlay()})}};